---
import type { Article } from "@pages/politica-privacidad.astro";

type Props = {
  data: Article;
};
const { data } = Astro.props;
---

<li class="page-nav--item" id={`page-nav-${data.id}`}>
  <div class="page-nav--background"></div>
  <div class="page-nav--text-boundary">
    <p class="page-nav--text">{data.title}</p>
    <p class="page-nav--text">{data.title}</p>
  </div>
</li>

<style lang="scss">
  @use "@styles/vars" as *;
  .page-nav {
    &--item {
      position: relative;
      width: 100%;
      display: flex;
      border-bottom: 1px solid $ke-white;
      cursor: pointer;
      overflow: hidden;
    }
    &--text-boundary {
      position: relative;
      display: flex;
      gap: 1rem;
      padding: 1.25rem 1rem 1rem;
      overflow: hidden;
    }
    &--text {
      font-size: 1.25rem;
      font-family: $display;
      &:last-child {
        position: absolute;
        left: (-100%);
      }
    }
    &--background {
      width: 100%;
      height: 100%;
      background-color: rgba($ke-black, 0.2);
      position: absolute;
      top: 0;
      left: -100%;
    }
  }
</style>
<script>
  import gsap from "gsap";
  document.addEventListener("astro:page-load", () => {
    const pageNavElements = document.querySelectorAll(
      ".page-nav--item"
    ) as NodeListOf<HTMLElement>;

    pageNavElements.forEach((element) => {
      const texts = element.querySelectorAll<HTMLElement>(".page-nav--text");
      const bg = element.querySelector<HTMLElement>(".page-nav--background");
      const textTl = gsap.timeline({ paused: true });
      textTl
        .to(bg, {
          xPercent: 100,
          ease: "power4.inOut",
        })
        .to(
          texts,
          {
            xPercent: 100,
            x: "3rem",
            ease: "power4.inOut",
          },
          "<.1"
        );
      element.addEventListener("mouseenter", () => {
        textTl.play();
      });
      element.addEventListener("mouseleave", () => {
        textTl.reverse();
      });
    });
  });
</script>
